"use strict";(self.webpackChunkmern_app=self.webpackChunkmern_app||[]).push([[894],{4894:function(e,n,r){r.r(n),r.d(n,{default:function(){return g}});var t=r(2791),c=r(7689),a=r(4165),s=r(5861),o=r(9439),i=r(4398),l=r(6517),u=r(4447),d=r(184);var h=function(e){var n=e.className,r=e.location,c=e.zoom,a=(0,t.useRef)();return(0,t.useEffect)((function(){var e=new window.google.maps.Map(a.current,{zoom:c,center:r});new window.google.maps.Marker({position:r,map:e})}),[r,c]),(0,d.jsx)("div",{ref:a,className:"map ".concat(n)})},p=r(3108),f=r(7517),m=r(4488),x=r(3897);var j=function(e){var n=e.place,r=n.image,j=n.title,v=n.address,Z=n.description,g=(n.creator,n.location),C=n.id,b=(0,t.useState)(!1),k=(0,o.Z)(b,2),w=k[0],N=k[1],_=(0,t.useState)(!1),y=(0,o.Z)(_,2),E=y[0],z=y[1],A=(0,t.useContext)(p.V),S=A.loggedInUser,L=A.token,R=(0,c.s0)(),F=(0,f.x)(),I=F.isLoading,O=F.error,P=F.sendRequest,T=F.clearError;function U(){return(U=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("".concat("https://proj-places-app.herokuapp.com/api","/places/").concat(C),"DELETE",null,{Authorization:"Bearer ".concat(L)});case 3:z(!1),R("/",{replace:!0}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return O?(0,d.jsx)(x.Z,{error:O,onClear:T}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.Z,{onCancel:function(){return N(!1)},show:w,className:"scale-in-center",header:v,contentClass:"place-item__model-content",footerClass:"place-item__model-actions",footer:(0,d.jsx)(l.Z,{onClick:function(){return N(!1)},children:"Close"}),children:(0,d.jsx)("div",{className:"map-container",children:(0,d.jsx)(h,{location:g,zoom:13})})}),(0,d.jsx)(u.Z,{onCancel:function(){return z(!1)},show:E,header:"Are you sure?",className:"scale-in-center",contentClass:"place-item__model-content",footerClass:"place-item__model-actions",footer:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Z,{danger:!0,onClick:function(){return z(!1)},children:"Cancel"}),(0,d.jsx)(l.Z,{inverse:!0,onClick:function(){return U.apply(this,arguments)},children:I?(0,d.jsx)(m.Z,{}):"Proceed"})]}),children:(0,d.jsxs)("h4",{className:"center",children:["Are you sure you want to delete this place? ",(0,d.jsx)("br",{}),"Please note that it can't be undone thereafter"]})}),(0,d.jsxs)("li",{className:"place-item",children:[I&&(0,d.jsx)(m.Z,{asOverlay:!0}),(0,d.jsxs)(i.Z,{className:"place-item__content",children:[(0,d.jsx)("div",{className:"place-item__image",children:(0,d.jsx)("img",{src:"".concat("https://proj-places-app.herokuapp.com","/").concat(r),alt:j})}),(0,d.jsxs)("div",{className:"place-item__info",children:[(0,d.jsx)("h2",{children:j}),(0,d.jsx)("h3",{children:v}),(0,d.jsx)("p",{children:Z})]}),(0,d.jsxs)("div",{className:"place-item__actions",children:[(0,d.jsx)(l.Z,{inverse:!0,onClick:function(){return N(!0)},children:"View on Map"}),(null===S||void 0===S?void 0:S.id)===n.creator&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Z,{onClick:function(){R("/places/".concat(C),{replace:!0})},children:"Edit"}),(0,d.jsx)(l.Z,{danger:!0,onClick:function(){return z(!0)},children:"Delete"})]})]})]})]})]})};var v=function(e){var n=e.items,r=(0,t.useContext)(p.V).loggedInUser;return 0===n.length?(0,d.jsx)("div",{className:"place-list center",children:(0,d.jsxs)(i.Z,{children:[(0,d.jsx)("h2",{children:"This user has no places yet.."}),r?(0,d.jsx)(l.Z,{to:"/places/new",children:"Share place"}):(0,d.jsx)(l.Z,{to:"/auth",children:"Authenticate"})]})}):(0,d.jsx)("ul",{className:"place-list",children:n.map((function(e){return(0,d.jsx)(j,{place:e},e.id)}))})},Z=r(5800);var g=function(){var e=(0,c.UO)().userId,n=(0,Z.Z)("".concat("https://proj-places-app.herokuapp.com/api","/places/user/").concat(e),"get"),r=n.data,t=n.isLoading,a=n.error;return t?(0,d.jsx)("div",{className:"center",children:(0,d.jsx)(m.Z,{})}):a?(0,d.jsx)(x.Z,{error:a.response.data.message}):r?(0,d.jsx)(v,{items:r.places}):void 0}},7517:function(e,n,r){r.d(n,{x:function(){return o}});var t=r(4165),c=r(5861),a=r(9439),s=r(2791),o=function(){var e=(0,s.useState)(!1),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=(0,s.useState)(),l=(0,a.Z)(i,2),u=l[0],d=l[1],h=(0,s.useRef)([]),p=(0,s.useCallback)(function(){var e=(0,c.Z)((0,t.Z)().mark((function e(n){var r,c,a,s,i,l,u=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"GET",c=u.length>2&&void 0!==u[2]?u[2]:null,a=u.length>3&&void 0!==u[3]?u[3]:{},o(!0),s=new AbortController,h.current.push(s),e.prev=6,e.next=9,fetch(n,{method:r,body:c,headers:a,signal:s.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(l=e.sent,h.current=h.current.filter((function(e){return e!==s})),i.ok){e.next=16;break}throw new Error(l.message);case 16:return o(!1),e.abrupt("return",l);case 20:throw e.prev=20,e.t0=e.catch(6),d(e.t0.message),o(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(n){return e.apply(this,arguments)}}(),[]);return(0,s.useEffect)((function(){return function(){h.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:r,error:u,sendRequest:p,clearError:function(){d(null)}}}},5800:function(e,n,r){var t=r(4165),c=r(5861),a=r(2791),s=r(4887),o=r(1243);n.Z=function(e,n,r,i){var l=(0,a.useRef)([]),u=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(c){var a,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new AbortController,l.current.push(a),e.next=4,o.Z[n](c,r,{headers:i||{"Content-Type":"application/json"},signal:a.signal});case 4:return s=e.sent,l.current=l.current.filter((function(e){return e!==a})),e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]);var d=(0,s.ZP)(e,u);return{data:d.data,error:d.error,isLoading:d.isLoading}}},6517:function(e,n,r){r.d(n,{Z:function(){return a}});r(2791);var t=r(1087),c=r(184),a=function(e){return e.href?(0,c.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?(0,c.jsx)(t.rU,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):(0,c.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}},4398:function(e,n,r){r.d(n,{Z:function(){return c}});r(2791);var t=r(184),c=function(e){return(0,t.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}},3897:function(e,n,r){r(2791);var t=r(4447),c=r(6517),a=r(184);n.Z=function(e){return(0,a.jsx)(t.Z,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:(0,a.jsx)(c.Z,{onClick:e.onClear,children:"Okay"}),children:(0,a.jsx)("p",{children:e.error})})}},4447:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(1413),c=(r(2791),r(4164)),a=r(4975),s=r(184);function o(e){var n=e.className,r=e.style,t=e.headerClass,a=e.header,o=e.onSubmit,i=e.contentClass,l=e.children,u=e.footerClass,d=e.footer,h=(0,s.jsxs)("div",{className:"modal ".concat(n),style:r,children:[a&&(0,s.jsx)("header",{className:"modal__header ".concat(t),children:(0,s.jsx)("h2",{children:a})}),(0,s.jsxs)("form",{onSubmit:o||function(e){return e.preventDefault()},children:[(0,s.jsx)("div",{className:"modal__content ".concat(i),children:l}),(0,s.jsx)("footer",{className:"modal__footer ".concat(u),children:d})]})]});return c.createPortal(h,document.getElementById("modal-hook"))}var i=function(e){var n=e.onCancel;if(e.show)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{onClick:n}),(0,s.jsx)(o,(0,t.Z)({},e))]})}}}]);
//# sourceMappingURL=894.b8cd7501.chunk.js.map