"use strict";(self.webpackChunkmern_app=self.webpackChunkmern_app||[]).push([[116],{4366:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(9439),a=(n(2791),n(7196)),i=n(1786),s=n(6517),l=n(6507),c=n(4488),o=n(8874),u=n(184);var d=function(e){var t=e.place,n=e.placeSubmit,d=e.updateMode,p=e.error,v=e.isLoading,x=(0,l.Z)(t),f=(0,r.Z)(x,2),h=f[0],m=f[1];return(0,u.jsxs)("form",{className:"place-form",onSubmit:function(e){e.preventDefault(),n(m)},children:[(0,u.jsx)(a.Z,{id:"title",type:"text",label:"Title",element:"input",validators:[(0,i.hg)()],errorText:"Please enter a valid title",onInput:h,initValue:null===t||void 0===t?void 0:t.inputs.title.value}),(0,u.jsx)(a.Z,{id:"description",label:"Description",type:"text",validators:[(0,i.CP)(5)],errorText:"Please enter a valid descripition. (5 characters at least)",onInput:h,initValue:null===t||void 0===t?void 0:t.inputs.description.value}),!d&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.Z,{id:"address",label:"Address",type:"text",element:"input",validators:[(0,i.hg)()],errorText:"Please enter a valid adress",onInput:h,initValue:null===t||void 0===t?void 0:t.inputs.address.value}),(0,u.jsx)(o.Z,{id:"image",center:!0,errorText:!0,onInput:h})]}),(0,u.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,u.jsx)(s.Z,{type:"submit",disabled:(m.isValid&&t&&function(){var e=!0;for(var n in m.inputs)m.inputs[n].value!==t.inputs[n].value&&(e=!1);return e}())|!m.isValid,children:v?(0,u.jsx)("div",{className:"center",children:(0,u.jsx)(c.Z,{})}):d?"Update":"Add Place"})}),p&&(0,u.jsx)("span",{style:{color:"red"},children:p})]})}},3204:function(e,t,n){n.r(t);var r=n(4165),a=n(5861),i=n(9439),s=n(2791),l=n(4366),c=n(7689),o=n(4398),u=n(7517),d=n(4488),p=n(3108),v=n(184);t.default=function(){var e=(0,c.UO)().placeId,t=(0,c.s0)(),n=(0,s.useState)(),x=(0,i.Z)(n,2),f=x[0],h=x[1],m=(0,s.useContext)(p.V),j=m.loggedInUser,Z=m.token,b=(0,u.x)(),y=b.isLoading,g=b.error,k=b.sendRequest;b.clearError,(0,s.useEffect)((function(){var t=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k("".concat("https://proj-places-app.herokuapp.com/api","/places/").concat(e));case 3:n=t.sent,h(n.place),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[]);var V=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k("".concat("https://proj-places-app.herokuapp.com/api","/places/").concat(e),"PATCH",JSON.stringify({title:a.inputs.title.value,description:a.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer ".concat(Z)});case 3:t("/"+j.id+"/places",{replace:!0}),n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}(),T={inputs:{title:{value:null===f||void 0===f?void 0:f.title,isValid:!0},description:{value:null===f||void 0===f?void 0:f.description,isValid:!0},address:{value:null===f||void 0===f?void 0:f.address,isValid:!0}},isValid:!0};return y?(0,v.jsx)("div",{className:"center",children:(0,v.jsx)(d.Z,{})}):f||g?f?(0,v.jsx)(l.Z,{placeSubmit:V,place:T,updateMode:!0,isLoading:y,error:"The user aborted a request."!==g&&g}):void 0:(0,v.jsx)("div",{className:"center",children:(0,v.jsx)(o.Z,{children:(0,v.jsx)("h2",{children:"Could not find place!"})})})}},4398:function(e,t,n){n.d(t,{Z:function(){return a}});n(2791);var r=n(184),a=function(e){return(0,r.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}}}]);
//# sourceMappingURL=116.615f5b08.chunk.js.map